<?xml version="1.0" encoding="utf-8" ?>
<views:BasePageCodeBehind
    x:Class="Sandbox.CameraTestPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:draw="http://schemas.appomobi.com/drawnUi/2023/draw"
    xmlns:camera="http://schemas.appomobi.com/drawnUi/2023/camera"
    xmlns:views="clr-namespace:Sandbox.Views"
    BackgroundColor="Black">

    <draw:Canvas
        BackgroundColor="Black"
        Gestures="Enabled"
        HorizontalOptions="Fill"
        VerticalOptions="Fill">

        <draw:SkiaLayout Type="Column" HorizontalOptions="Fill" VerticalOptions="Fill">
            
            <!-- Camera Preview -->
            <camera:SkiaCamera
                x:Name="CameraControl"
                HorizontalOptions="Fill"
                VerticalOptions="Fill"
                Facing="Default"
                IsOn="True"
                CaptureSuccess="OnCaptureSuccess"
                CaptureFailed="OnCaptureFailed"
                Zoomed="OnZoomed" />

            <!-- Controls -->
            <draw:SkiaLayout 
                Type="Row" 
                HorizontalOptions="Fill" 
                HeightRequest="100"
                BackgroundColor="#80000000"
                Spacing="16"
                Padding="16">

                <draw:SkiaButton
                    x:Name="FlashButton"
                    Text="Flash Off"
                    BackgroundColor="DarkGray"
                    TextColor="White"
                    CornerRadius="8"
                    WidthRequest="100"
                    HeightRequest="50"
                    Clicked="OnFlashClicked" />

                <draw:SkiaButton
                    x:Name="CaptureButton"
                    Text="Capture"
                    BackgroundColor="Red"
                    TextColor="White"
                    CornerRadius="25"
                    WidthRequest="80"
                    HeightRequest="80"
                    Clicked="OnCaptureClicked" />

                <draw:SkiaButton
                    x:Name="SwitchCameraButton"
                    Text="Switch"
                    BackgroundColor="DarkGray"
                    TextColor="White"
                    CornerRadius="8"
                    WidthRequest="100"
                    HeightRequest="50"
                    Clicked="OnSwitchCameraClicked" />

            </draw:SkiaLayout>

            <!-- Status -->
            <draw:SkiaLabel
                x:Name="StatusLabel"
                Text="Camera Status: Initializing..."
                TextColor="White"
                FontSize="14"
                HorizontalOptions="Center"
                Padding="8" />

        </draw:SkiaLayout>

    </draw:Canvas>

</views:BasePageCodeBehind>
